diff --git a/node_modules/@y/websocket-server/src/utils.js b/node_modules/@y/websocket-server/src/utils.js
index d624c5a..9ce735b 100644
--- a/node_modules/@y/websocket-server/src/utils.js
+++ b/node_modules/@y/websocket-server/src/utils.js
@@ -23,28 +23,27 @@ const wsReadyStateClosed = 3 // eslint-disable-line
 
 // disable gc when using snapshots!
 const gcEnabled = process.env.GC !== 'false' && process.env.GC !== '0'
-const persistenceDir = process.env.YPERSISTENCE
+// Use environment variable or default to './y-leveldb-database'
+const persistenceDir = process.env.YPERSISTENCE || './y-leveldb-database'
 /**
  * @type {{bindState: function(string,WSSharedDoc):void, writeState:function(string,WSSharedDoc):Promise<any>, provider: any}|null}
  */
 let persistence = null
-if (typeof persistenceDir === 'string') {
-  console.info('Persisting documents to "' + persistenceDir + '"')
-  // @ts-ignore
-  const ldb = new LeveldbPersistence(persistenceDir)
-  persistence = {
-    provider: ldb,
-    bindState: async (docName, ydoc) => {
-      const persistedYdoc = await ldb.getYDoc(docName)
-      const newUpdates = Y.encodeStateAsUpdate(ydoc)
-      ldb.storeUpdate(docName, newUpdates)
-      Y.applyUpdate(ydoc, Y.encodeStateAsUpdate(persistedYdoc))
-      ydoc.on('update', update => {
-        ldb.storeUpdate(docName, update)
-      })
-    },
-    writeState: async (_docName, _ydoc) => {}
-  }
+console.info('Persisting documents to "' + persistenceDir + '"')
+// @ts-ignore
+const ldb = new LeveldbPersistence(persistenceDir)
+persistence = {
+  provider: ldb,
+  bindState: async (docName, ydoc) => {
+    const persistedYdoc = await ldb.getYDoc(docName)
+    const newUpdates = Y.encodeStateAsUpdate(ydoc)
+    ldb.storeUpdate(docName, newUpdates)
+    Y.applyUpdate(ydoc, Y.encodeStateAsUpdate(persistedYdoc))
+    ydoc.on('update', update => {
+      ldb.storeUpdate(docName, update)
+    })
+  },
+  writeState: async (_docName, _ydoc) => {}
 }
 
 /**
